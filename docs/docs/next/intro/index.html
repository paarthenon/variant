<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-intro">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Introduction | Variant</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://paarthenon.github.io/variant/docs/next/intro"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Introduction | Variant"><meta data-rh="true" name="description" content="**Variant** is a language feature disguised as a library."><meta data-rh="true" property="og:description" content="**Variant** is a language feature disguised as a library."><link data-rh="true" rel="icon" href="/variant/img/variant.ico"><link data-rh="true" rel="canonical" href="https://paarthenon.github.io/variant/docs/next/intro"><link data-rh="true" rel="alternate" href="https://paarthenon.github.io/variant/docs/next/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://paarthenon.github.io/variant/docs/next/intro" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/variant/blog/rss.xml" title="Variant RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/variant/blog/atom.xml" title="Variant Atom Feed"><link rel="stylesheet" href="/variant/assets/css/styles.b9ae0410.css">
<link rel="preload" href="/variant/assets/js/runtime~main.9f57bcc0.js" as="script">
<link rel="preload" href="/variant/assets/js/main.fb419d95.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/variant/"><div class="navbar__logo"><img src="/variant/img/variant_logo.png" alt="Variant Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/variant/img/variant_logo.png" alt="Variant Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Variant</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/variant/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/variant/docs/about">About</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/variant/docs/next/intro">3.0.0-dev 🔨</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/variant/docs/next/intro">3.0.0-dev 🔨</a></li><li><a class="dropdown__link" href="/variant/docs/intro">2.1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/variant/docs/api">☕ API</a><a href="https://github.com/paarthenon/variant" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/variant/docs/next/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/variant/docs/next/tutorial/part-zero">Tutorial</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/tutorial/part-zero">Introducing &quot;Kind of Super&quot;</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/variant/docs/next/book/creation">The Book</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/creation">Creating Variants</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/variant/docs/next/book/scoped">Fancier Variants</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/inspection">Inspection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/organization">Organization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/match">Match</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/matcher">Matcher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/catalog">Catalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/flags">Flags and Matrix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/utilities">Utilities</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/variant/docs/next/articles/naming">Articles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/variant/docs/next/libraries/react">Libraries</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/todo">Todo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/glossary">📑 Glossary of Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/api/modules">☕ API</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Variant<!-- --> <b>3.0.0-dev 🔨</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/variant/docs/intro">latest version</a></b> (<!-- -->2.1.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/variant/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.0.0-dev 🔨</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header><blockquote><p><em><strong>Variant</strong> is a language feature disguised as a library.</em></p></blockquote><p>Variant aims to bring the experience of <a href="https://dev.realworldocaml.org/variants.html" target="_blank" rel="noopener noreferrer">variant types</a> to TypeScript. Variant types, a.k.a. <a href="https://basarat.gitbook.io/typescript/type-system/discriminated-unions" target="_blank" rel="noopener noreferrer">discriminated unions</a> in the TypeScript world, are an excellent tool for describing and handling flexible domains and problem spaces. However, because <a href="http://web.archive.org/web/20191018040436/https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions" target="_blank" rel="noopener noreferrer"><em>&quot;TypeScript instead builds on JavaScript patterns as they exist today&quot;</em></a> using them as-is can result in tedious and fragile code. This project addresses that by providing well-typed, fluent, and expressive tools to safely do away with the boilerplate.</p><p><a href="/variant/docs/next/api/modules">🧠 Click here to jump straight to the API Reference</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick start" title="Direct link to Quick start">​</a></h2><p>Variant has zero dependencies and doesn&#x27;t need any setup.</p><pre class="shiki comrade-contrast" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">bash</div><div class="code-container"><code><div class="line"><span style="color:#D6DBDB">yarn add variant@dev </span><span style="color:#506565"># npm install --save variant@dev</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme" style="background-color:#000000;color:#ffffff"><div class="language-id">bash</div><div class="code-container"><code><div class="line"><span style="color:#FFFFFF">yarn add variant@dev </span><span style="color:#A8A8B1">#</span><span style="color:#FFFFFF"> npm install --save variant@dev</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>Let&#x27;s use <a href="/variant/docs/next/book/creation"><code>variant()</code></a> to describe a simple domain — <strong>Animals</strong>. Much like an enum, our <code>Animal</code> variant can be in one of several forms. Unlike an enum, our variant can carry <em>data</em> with each of its forms. </p><p>For the game we&#x27;re making, our player can have a pet cat, dog, or snake. We have different concerns for each animal, so we&#x27;ll want to define them with distinct fields. The <a href="/variant/docs/next/api#fields"><code>fields()</code></a> function is a useful shorthand here. We&#x27;ll see more of how it works in the <a href="/variant/docs/next/book/creation">first section of the User Guide</a>.</p><p>If there&#x27;s a need for more control over the creation process, including default inputs, side effects, or other complex logic, define the case with a simple function. We&#x27;ll do so for the snake constructor to give it a default skin pattern of <code>&#x27;striped&#x27;</code>.</p><a id="animal-ts"></a><pre class="shiki comrade-contrast with-title twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb" title="animal.ts"><div class="code-title">animal.ts</div><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">import</span><span style="color:#D6DBDB"> {</span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const variant: {
    &lt;VM extends RawVariant&gt;(template: GenericTemplate&lt;VM&gt;): Identity&lt;GenericVariantRecord&lt;VM, &quot;type&quot;&gt;&gt;;
    &lt;VM_1 extends RawVariant&gt;(template: VM_1): Identity&lt;...&gt;;
    &lt;T extends string | VariantCreator&lt;...&gt;&gt;(template: T[]): Identity&lt;...&gt;;
}
import variant">variant</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) function fields&lt;T extends {}&gt;(defaults?: Partial&lt;T&gt;): (...args: {} extends T ? ([input: T] | []) : [input: T]) =&gt; T
import fields">fields</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#D6DBDB">} </span><span style="color:#9BB7A7">from</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;variant&#x27;</span><span style="color:#D6DBDB">;</span></div><div class="line"> </div><div class="line"><span style="color:#9BB7A7">export</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="(alias) variant&lt;{
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
}&gt;(template: {
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
}): {
    ...;
} (+2 overloads)
import variant">variant</data-lsp></span><span style="color:#D6DBDB">({</span></div><div class="line"><span style="color:#D6DBDB">    <data-lsp lsp="(property) cat: (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}">cat</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    furnitureDamaged: number;
}&gt;(defaults?: Partial&lt;{
    name: string;
    furnitureDamaged: number;
}&gt; | undefined): (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}
import fields">fields</data-lsp></span><span style="color:#D6DBDB">&lt;{<data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">number</span><span style="color:#D6DBDB">}&gt;(),</span></div><div class="line"><span style="color:#D6DBDB">    <data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt;(defaults?: Partial&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt; | undefined): (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}
import fields">fields</data-lsp></span><span style="color:#D6DBDB">&lt;{<data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#9BB7A7">?:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">}&gt;(),</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: (name: string, pattern?: string) =&gt; {
    name: string;
    pattern: string;
}">snake</data-lsp></span><span style="color:#D6DBDB">: (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) pattern: string">pattern</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;striped&#x27;</span><span style="color:#D6DBDB">) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> ({</span><span style="color:#FFFFFF"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(property) pattern: string">pattern</data-lsp></span><span style="color:#D6DBDB">}),</span></div><div class="line"><span style="color:#D6DBDB">});</span></div><div class="line"><span style="color:#9BB7A7">export</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">type</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> <data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp>&lt;</span><span style="color:#9BB7A7">typeof</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#D6DBDB">&gt;;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme with-title twoslash lsp" style="background-color:#000000;color:#ffffff" title="animal.ts"><div class="code-title">animal.ts</div><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">import</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span><span style="color:#F56565"><data-lsp lsp="(alias) const variant: {
    &lt;VM extends RawVariant&gt;(template: GenericTemplate&lt;VM&gt;): Identity&lt;GenericVariantRecord&lt;VM, &quot;type&quot;&gt;&gt;;
    &lt;VM_1 extends RawVariant&gt;(template: VM_1): Identity&lt;...&gt;;
    &lt;T extends string | VariantCreator&lt;...&gt;&gt;(template: T[]): Identity&lt;...&gt;;
}
import variant">variant</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) function fields&lt;T extends {}&gt;(defaults?: Partial&lt;T&gt;): (...args: {} extends T ? ([input: T] | []) : [input: T]) =&gt; T
import fields">fields</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#A8A8B1">}</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">from</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">variant</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">;</span></div><div class="line"> </div><div class="line"><span style="color:#A8A8B1">export</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> <data-lsp lsp="(alias) variant&lt;{
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
}&gt;(template: {
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
}): {
    ...;
} (+2 overloads)
import variant">variant</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) cat: (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}">cat</data-lsp>: <data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    furnitureDamaged: number;
}&gt;(defaults?: Partial&lt;{
    name: string;
    furnitureDamaged: number;
}&gt; | undefined): (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}
import fields">fields</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">number</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">&gt;()</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp>: <data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt;(defaults?: Partial&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt; | undefined): (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}
import fields">fields</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#A8A8B1">?:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">&gt;()</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) snake: (name: string, pattern?: string) =&gt; {
    name: string;
    pattern: string;
}">snake</data-lsp>: </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(parameter) pattern: string">pattern</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">striped</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) pattern: string">pattern</data-lsp></span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#A8A8B1">export</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">type</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#A8A8B1">typeof</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>Let&#x27;s take a closer look at that last line.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">export</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">type</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}" style="border-bottom:solid 2px lightgrey">Animal</data-lsp> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> <data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp>&lt;</span><span style="color:#9BB7A7">typeof</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#D6DBDB">&gt;;</span></div><div class="meta-line"><span class="popover-prefix">              </span><span class="popover"><div class="arrow"></div>type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">export</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">type</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}" style="border-bottom:solid 2px lightgrey">Animal</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#A8A8B1">typeof</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF">;</span></div><div class="meta-line"><span class="popover-prefix">              </span><span class="popover"><div class="arrow"></div>type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><blockquote><p>🖱️ <em>Mouse users can hover over any term to see types thanks to <a href="https://shikijs.github.io/twoslash/" target="_blank" rel="noopener noreferrer">shiki-twoslash</a></em>.</p></blockquote><p>Those familiar with TypeScript&#x27;s discriminated unions will recognize this pattern. The goal of this library is not to replace discriminated unions, but rather to provide the best possible way to <em>work with them.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-power-of-variant">The power of <code>variant()</code><a href="#the-power-of-variant" class="hash-link" aria-label="Direct link to the-power-of-variant" title="Direct link to the-power-of-variant">​</a></h3><p>Well... to work with them, and <em>to build on them</em>. The tools Variant provides offer more convenience, safety, and utility than the vanilla approach. Traditionally, a developer would define each form of a discriminated union as its own type, write a factory function for each of those types, and then manually place these types in a union (<code>type Animal = Dog | Cat | Snake</code>).</p><p>This process is error prone, repetitive, and confusing to new developers. Each of these problems multiply with scale. Adding a new case requires modifications in multiple locations and duplication of effort. Variant is based on the idea that the subtype (<code>Animal&lt;&#x27;dog&#x27;&gt;</code>) can be inferred from the return type of the dog constructor, and that the larger type <code>Animal</code> can be calculated from a set of these constructor functions. By grouping our cases in one place, we define the bounds of our <a href="/variant/docs/next/glossary/#domain"><strong>domain</strong></a>, automate the relation of these types, and provide clarity of intent.</p><p>But it&#x27;s not just in how we construct the variants. <strong>The experience as a consumer is significantly improved.</strong> There&#x27;s a lot that can be done with this single import. Because we used the name <code>Animal</code> for the value <em>and</em> the type, this statement will import both.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">import</span><span style="color:#D6DBDB"> {</span><span style="color:#FFFFFF"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#D6DBDB">} </span><span style="color:#9BB7A7">from</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;./animal&#x27;</span><span style="color:#D6DBDB">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">import</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span><span style="color:#F56565"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#A8A8B1">}</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">from</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">./animal</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-new-instances">Create new instances<a href="#create-new-instances" class="hash-link" aria-label="Direct link to Create new instances" title="Direct link to Create new instances">​</a></h4><p>With the object <code>Animal</code> (<em>a collection of tag constructors</em>) we can easily create new instances, even if custom logic is involved. </p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#F9F7F1"><data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp></span><span style="color:#D6DBDB">({<data-lsp lsp="(property) name: string">name</data-lsp>: </span><span style="color:#63A5A5">&#x27;Cerberus&#x27;</span><span style="color:#D6DBDB">});</span></div><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const steve: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">steve</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: (name: string, pattern?: string | undefined) =&gt; {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">snake</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#63A5A5">&#x27;Steve&#x27;</span><span style="color:#D6DBDB">); </span><span style="color:#506565">// Steve will have striped skin.</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{<data-lsp lsp="(property) name: string">name</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">Cerberus</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const steve: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">steve</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) snake: (name: string, pattern?: string | undefined) =&gt; {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">snake</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">Steve</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">; </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> Steve will have striped skin.</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-the-union">Type the Union<a href="#type-the-union" class="hash-link" aria-label="Direct link to Type the Union" title="Direct link to Type the Union">​</a></h4><p>With the type <code>Animal</code>, we can describe the shape of the union. It&#x27;s our way of saying <em>this is some animal, but we don&#x27;t know which one</em>. We can still access those properties shared among all animals, like the <code>name</code>.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">declare</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">var</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>;</span></div><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#D6DBDB">;</span></div><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const name: string">name</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#D6DBDB">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">declare</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">var</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp>;</span></div><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const name: string">name</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) name: string">name</data-lsp>;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-specific-instances">Type specific instances<a href="#type-specific-instances" class="hash-link" aria-label="Direct link to Type specific instances" title="Direct link to Type specific instances">​</a></h4><p>We can access specific elements of the union</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">declare</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">var</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var dog: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}" style="border-bottom:solid 2px lightgrey">dog</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>&lt;</span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">&gt;;</span></div><div class="meta-line"><span class="popover-prefix">            </span><span class="popover"><div class="arrow"></div>var dog: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">declare</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">var</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var dog: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}" style="border-bottom:solid 2px lightgrey">dog</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>&lt;</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF">;</span></div><div class="meta-line"><span class="popover-prefix">            </span><span class="popover"><div class="arrow"></div>var dog: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><blockquote><p>⚠️ This requires the <a href="/variant/docs/next/articles/that-type">full type annotation</a></p></blockquote><p>or define subsets:</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">type</span><span style="color:#D6DBDB"> <data-lsp lsp="type furryAnimal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">furryAnimal</data-lsp> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>&lt;</span><span style="color:#63A5A5">&#x27;cat&#x27;</span><span style="color:#D6DBDB">&gt; </span><span style="color:#9BB7A7">|</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>&lt;</span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">&gt;; </span><span style="color:#506565">// no snake</span></div><div class="line"><span style="color:#C24E4B">type</span><span style="color:#D6DBDB"> <data-lsp lsp="type furryAnimal2 = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">furryAnimal2</data-lsp> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>&lt;</span><span style="color:#63A5A5">&#x27;cat&#x27;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">|</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">&gt;; </span><span style="color:#506565">// same thing</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">type</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="type furryAnimal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">furryAnimal</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">cat</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">|</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF">; </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> no snake</span></div><div class="line"><span style="color:#A8A8B1">type</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="type furryAnimal2 = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">furryAnimal2</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">cat</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">|</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">&gt;</span><span style="color:#FFFFFF">; </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> same thing</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="narrow-from-the-union-to-specific-instances">Narrow from the union to specific instances<a href="#narrow-from-the-union-to-specific-instances" class="hash-link" aria-label="Direct link to Narrow from the union to specific instances" title="Direct link to Narrow from the union to specific instances">​</a></h4><p>TypeScript&#x27;s <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html" target="_blank" rel="noopener noreferrer">narrowing</a> will work as expected, constraining the union to its specific element.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">declare</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">var</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>;</span></div><div class="line"> </div><div class="line"><span style="color:#9BB7A7">if</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">===</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">) {</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#506565">// can access dog-specific properties</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB">;</span></div><div class="line"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">declare</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">var</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">;</span></div><div class="line"> </div><div class="line"><span style="color:#A8A8B1">if</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp> </span><span style="color:#A8A8B1">===</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> can access dog-specific properties</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp>;</span></div><div class="line"><span style="color:#A8A8B1">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>This is also available as <code>isType()</code>, which can accept as input <code>&#x27;cat&#x27; | &#x27;dog&#x27; | &#x27;snake&#x27;</code>, or one of the animal constructors.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">if</span><span style="color:#D6DBDB"> (</span><span style="color:#F9F7F1"><data-lsp lsp="(alias) isType&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, VariantCreator&lt;&quot;dog&quot;, (input: {
    ...;
}) =&gt; {
    ...;
}, &quot;type&quot;&gt;&gt;(object: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 3 more ... | undefined, type: VariantCreator&lt;...&gt;): object is {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} (+1 overload)
import isType">isType</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) dog: VariantCreator&lt;&quot;dog&quot;, (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}, &quot;type&quot;&gt;">dog</data-lsp></span><span style="color:#D6DBDB">)) {</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="var animal: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB">;</span></div><div class="line"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">if</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF"><data-lsp lsp="(alias) isType&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, VariantCreator&lt;&quot;dog&quot;, (input: {
    ...;
}) =&gt; {
    ...;
}, &quot;type&quot;&gt;&gt;(object: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 3 more ... | undefined, type: VariantCreator&lt;...&gt;): object is {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} (+1 overload)
import isType">isType</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) dog: VariantCreator&lt;&quot;dog&quot;, (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}, &quot;type&quot;&gt;">dog</data-lsp></span><span style="color:#A8A8B1">))</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="var animal: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp>;</span></div><div class="line"><span style="color:#A8A8B1">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Processing these types</div><div class="admonitionContent_S0QG"><p>Now that we can express the types we&#x27;ll run into in our code, we can move on to handling them. Any of the familiar methods will work—<code>if</code> statements, <code>switch</code> statements, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer">maps</a> or <a href="https://en.wikipedia.org/wiki/Lookup_table?" target="_blank" rel="noopener noreferrer">lookup tables</a>—but I would argue the most effective approach is <a href="/variant/docs/next/glossary#matching"><strong>pattern matching</strong></a>.</p><ul><li>Unlike an <code>if</code> statement, multiple cases can be handled all at once.</li><li>Unlike the <code>if</code>/<code>switch</code> statement(s)<ul><li>the match action is <a href="/variant/docs/next/glossary#exhaustive"><strong>exhaustive</strong></a> by default.</li><li>the match functions are <a href="/variant/docs/next/glossary#expression"><strong>expressions</strong></a> and can be used inline or in JSX.</li></ul></li><li>Unlike maps and lookup tables, no explicit types are required.</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-me-a-match-">Make me a <code>match()</code> <a href="https://www.youtube.com/watch?v=jVGNdB6iEeA" target="_blank" rel="noopener noreferrer">(🎻)</a><a href="#make-me-a-match-" class="hash-link" aria-label="Direct link to make-me-a-match-" title="Direct link to make-me-a-match-">​</a></h3><p>Variant&#x27;s match functions allow us to directly express our response to each scenario. We can leverage this case-specific logic to make decisions or to render things differently depending on the value at runtime.</p><p>Let&#x27;s help our player&#x27;s <strong>rival</strong> decide on whether or not they want a specific animal as a pet. They are allergic to dogs, so dogs are a no-go. Cats are nice but the rival can&#x27;t afford to replace furniture, so the cat has to have a history of good behavior. Any snake will do.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">function</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>) {</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#9BB7A7">return</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
}, string&gt;(target: string | ... 2 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, handler: {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
})): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">, {</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) dog: (_: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean">dog</data-lsp></span><span style="color:#D6DBDB">: </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) cat: ({ furnitureDamaged }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; boolean">cat</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">&lt;</span><span style="color:#D6DBDB"> </span><span style="color:#4EADAD">3</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean">snake</data-lsp></span><span style="color:#D6DBDB">: </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">true</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">    })</span></div><div class="line"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">function</span><span style="color:#FFFFFF"> <data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">return</span><span style="color:#FFFFFF"> <data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
}, string&gt;(target: string | ... 2 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, handler: {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; {
    dog: (_: {
        type: &quot;dog&quot;;
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; boolean;
    cat: ({ furnitureDamaged }: {
        ...;
    }) =&gt; boolean;
    snake: (_: {
        ...;
    }) =&gt; boolean;
})): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">, {</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) dog: (_: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean">dog</data-lsp>: </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">false</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) cat: ({ furnitureDamaged }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; boolean">cat</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">3</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) snake: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean">snake</data-lsp>: </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">true</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    }</span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#A8A8B1">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>We can now use this function to evaluate some animal we come across, or perhaps even use it to filter a list of animals. </p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const potentialPets: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]">potentialPets</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const animals: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]">animals</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#F9F7F1"><data-lsp lsp="Returns the elements of an array that meet the condition specified in a callback function.

(method) Array&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }&gt;.filter(predicate: (value: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, index: number, array: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]) =&gt; unknown, thisArg?: any): ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[] (+1 overload)">filter</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#D6DBDB">);</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const potentialPets: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]">potentialPets</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const animals: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]">animals</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="Returns the elements of an array that meet the condition specified in a callback function.

(method) Array&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }&gt;.filter(predicate: (value: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, index: number, array: ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[]) =&gt; unknown, thisArg?: any): ({
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
})[] (+1 overload)">filter</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>Even though we never gave a return type for <code>rivalWantsAnimal</code>, <code>match()</code> has been written to work with <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html" target="_blank" rel="noopener noreferrer">TypeScript&#x27;s type inference</a>, allowing the language to infer <code>boolean</code> as the correct return type. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="conditional-rendering">Conditional Rendering<a href="#conditional-rendering" class="hash-link" aria-label="Direct link to Conditional Rendering" title="Direct link to Conditional Rendering">​</a></h4><p>A simple form of <a href="/variant/docs/next/glossary#conditional-rendering"><strong>conditional rendering</strong></a> would be to describe how an animal is relaxing. Each description could be a simple line or something more complex, and it could involve information about the animal.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const describeAnimal: (animal: Animal) =&gt; string">describeAnimal</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
}, string&gt;(target: string | ... 2 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, handler: {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
})): string (+3 overloads)
import match">match</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">, {</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="(property) cat: ({ name }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; string">cat</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">`</span><span style="color:#D6DBDB">${</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">}</span><span style="color:#63A5A5"> is lounging on the windowsill.`</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="(property) dog: ({ name, favoriteBall }: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; string">dog</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> (</span></div><div class="line"><span style="color:#D6DBDB">        [</span></div><div class="line"><span style="color:#D6DBDB">            </span><span style="color:#63A5A5">`</span><span style="color:#D6DBDB">${</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">}</span><span style="color:#63A5A5"> is on the rug`</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">            </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">!=</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7"><data-lsp lsp="var undefined">undefined</data-lsp></span></div><div class="line"><span style="color:#D6DBDB">                </span><span style="color:#9BB7A7">?</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">`, nuzzling a </span><span style="color:#D6DBDB">${</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) favoriteBall: string">favoriteBall</data-lsp></span><span style="color:#D6DBDB">}</span><span style="color:#63A5A5"> ball.`</span></div><div class="line"><span style="color:#D6DBDB">                </span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;.&#x27;</span></div><div class="line"><span style="color:#D6DBDB">        ].</span><span style="color:#F9F7F1"><data-lsp lsp="Adds all the elements of an array into a string, separated by the specified separator string.

(method) Array&lt;string&gt;.join(separator?: string | undefined): string">join</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#63A5A5">&#x27;&#x27;</span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    ),</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: ({ name }: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; string">snake</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">`</span><span style="color:#D6DBDB">${</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#D6DBDB">}</span><span style="color:#63A5A5"> is basking in the heat of the sun.`</span></div><div class="line"><span style="color:#D6DBDB">})</span></div><div class="line"> </div><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#F9F7F1"><data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp></span><span style="color:#D6DBDB">({<data-lsp lsp="(property) name: string">name</data-lsp>: </span><span style="color:#63A5A5">&#x27;Cerberus&#x27;</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp>: </span><span style="color:#63A5A5">&#x27;red&#x27;</span><span style="color:#D6DBDB">});</span></div><div class="line"> </div><div class="line"><span style="color:#FFFFFF"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#F9F7F1"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#F9F7F1"><data-lsp lsp="const describeAnimal: (animal: Animal) =&gt; string">describeAnimal</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#D6DBDB">));</span></div><div class="line"><span style="color:#506565">// Cerberus is on the rug, nuzzling a red ball.</span></div><div class="line"> </div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const describeAnimal: (animal: Animal) =&gt; string">describeAnimal</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> <data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
}, string&gt;(target: string | ... 2 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, handler: {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 1 more ... | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; {
    cat: ({ name }: {
        type: &quot;cat&quot;;
        name: string;
        furnitureDamaged: number;
    }) =&gt; string;
    dog: ({ name, favoriteBall }: {
        ...;
    }) =&gt; string;
    snake: ({ name }: {
        ...;
    }) =&gt; string;
})): string (+3 overloads)
import match">match</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">, {</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) cat: ({ name }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; string">cat</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">`</span><span style="color:#A8A8B1">${</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">} is lounging on the windowsill.</span><span style="color:#FFFFFF">`</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) dog: ({ name, favoriteBall }: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; string">dog</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(parameter) favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span></div><div class="line"><span style="color:#FFFFFF">        [</span></div><div class="line"><span style="color:#FFFFFF">            </span><span style="color:#FFFFFF">`</span><span style="color:#A8A8B1">${</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">} is on the rug</span><span style="color:#FFFFFF">`</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">            </span><span style="color:#F56565"><data-lsp lsp="(parameter) favoriteBall: string | undefined">favoriteBall</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">!=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="var undefined">undefined</data-lsp></span></div><div class="line"><span style="color:#FFFFFF">                </span><span style="color:#A8A8B1">?</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">`</span><span style="color:#A8A8B1">, nuzzling a ${</span><span style="color:#F56565"><data-lsp lsp="(parameter) favoriteBall: string">favoriteBall</data-lsp></span><span style="color:#A8A8B1">} ball.</span><span style="color:#FFFFFF">`</span></div><div class="line"><span style="color:#FFFFFF">                </span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">.</span><span style="color:#FFFFFF">&#x27;</span></div><div class="line"><span style="color:#FFFFFF">        ].<data-lsp lsp="Adds all the elements of an array into a string, separated by the specified separator string.

(method) Array&lt;string&gt;.join(separator?: string | undefined): string">join</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">&#x27;&#x27;</span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="(property) snake: ({ name }: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; string">snake</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">`</span><span style="color:#A8A8B1">${</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">} is basking in the heat of the sun.</span><span style="color:#FFFFFF">`</span></div><div class="line"><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span></div><div class="line"> </div><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(alias) const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
}
import Animal">Animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{<data-lsp lsp="(property) name: string">name</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">Cerberus</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">, <data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">red</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div><div class="line"> </div><div class="line"><span style="color:#F56565"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF"><data-lsp lsp="const describeAnimal: (animal: Animal) =&gt; string">describeAnimal</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="const cerberus: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">cerberus</data-lsp></span><span style="color:#A8A8B1">))</span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> Cerberus is on the rug, nuzzling a red ball.</span></div><div class="line"> </div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><blockquote><p>If this seems unfamiliar, take a look at ES6&#x27;s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">lambda expression</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="noopener noreferrer">template string</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Unpacking_fields_from_objects_passed_as_function_parameter" target="_blank" rel="noopener noreferrer">parameter destructuring</a> features. </p></blockquote><p>Just like before, TypeScript understands the return type of <code>describeAnimal</code>. It has been correctly inferred as <code>string</code>. We&#x27;ll see a more detailed example of conditional rendering when we enter the React portions of the tutorial. Rest assured, Variant isn&#x27;t a react library and doesn&#x27;t actually have any react dependencies. Despite that fact, the two work together seamlessly thanks to a shared focus on functional principles and <a href="/variant/docs/next/glossary#composability"><strong>composability</strong></a>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Compatability</div><div class="admonitionContent_S0QG"><p>By that same token, because variants <em>are</em> discriminated unions and TypeScript understands them as such, <code>match()</code> doesn&#x27;t actually need its target to have been created by <code>variant()</code>. Match can easily operate on the discriminated unions that are already within your code, and will work with models written by <a href="/variant/docs/next/glossary#codegen">codegen</a>. Any valid discriminated union will work.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exhaustiveness-and-partial-matching"><a href="/variant/docs/next/glossary#exhaustive">Exhaustiveness</a> and Partial Matching<a href="#exhaustiveness-and-partial-matching" class="hash-link" aria-label="Direct link to exhaustiveness-and-partial-matching" title="Direct link to exhaustiveness-and-partial-matching">​</a></h4><p>Matching is <strong>exhaustive</strong> by default, meaning that a user must handle <em>every</em> possibility before the compiler will be satisfied. As our result, our code is much more resilient. If we were to add a new type of <code>Animal</code> to the game, say a bird, then every place in the code we match against <code>Animal</code> will raise a compiler error. Don&#x27;t mistake them, these errors are a beautiful thing—they are step-by-step instructions on how to safely incorporate bird logic into the codebase.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line dim"><span style="color:#9BB7A7">import</span><span style="color:#D6DBDB"> {</span><span style="color:#FFFFFF"><data-lsp lsp="(alias) const variant: {
    &lt;VM extends RawVariant&gt;(template: GenericTemplate&lt;VM&gt;): Identity&lt;GenericVariantRecord&lt;VM, &quot;type&quot;&gt;&gt;;
    &lt;VM_1 extends RawVariant&gt;(template: VM_1): Identity&lt;...&gt;;
    &lt;T extends string | VariantCreator&lt;...&gt;&gt;(template: T[]): Identity&lt;...&gt;;
}
import variant">variant</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) function fields&lt;T extends {}&gt;(defaults?: Partial&lt;T&gt;): (...args: {} extends T ? ([input: T] | []) : [input: T]) =&gt; T
import fields">fields</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#D6DBDB">} </span><span style="color:#9BB7A7">from</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;variant&#x27;</span><span style="color:#D6DBDB">;</span></div><div class="line dim"> </div><div class="line dim"><span style="color:#9BB7A7">export</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
    bird: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="(alias) variant&lt;{
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
    bird: (input: {
        ...;
    }) =&gt; {
        ...;
    };
}&gt;(template: {
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
    bird: (input: {
        ...;
    }) =&gt; {
        ...;
    };
}): {
    ...;
} (+2 overloads)
import variant">variant</data-lsp></span><span style="color:#D6DBDB">({</span></div><div class="line dim"><span style="color:#D6DBDB">    <data-lsp lsp="(property) cat: (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}">cat</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    furnitureDamaged: number;
}&gt;(defaults?: Partial&lt;{
    name: string;
    furnitureDamaged: number;
}&gt; | undefined): (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}
import fields">fields</data-lsp></span><span style="color:#D6DBDB">&lt;{<data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">number</span><span style="color:#D6DBDB">}&gt;(),</span></div><div class="line dim"><span style="color:#D6DBDB">    <data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt;(defaults?: Partial&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt; | undefined): (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}
import fields">fields</data-lsp></span><span style="color:#D6DBDB">&lt;{<data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#9BB7A7">?:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">}&gt;(),</span></div><div class="line dim"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: (name: string, pattern?: string) =&gt; {
    name: string;
    pattern: string;
}">snake</data-lsp></span><span style="color:#D6DBDB">: (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) pattern: string">pattern</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;striped&#x27;</span><span style="color:#D6DBDB">) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> ({</span><span style="color:#FFFFFF"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(property) pattern: string">pattern</data-lsp></span><span style="color:#D6DBDB">}),</span></div><div class="line highlight"><span style="color:#D6DBDB">    <data-lsp lsp="(property) bird: (input: {
    name: string;
    canFly: boolean;
}) =&gt; {
    name: string;
    canFly: boolean;
}">bird</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    canFly: boolean;
}&gt;(defaults?: Partial&lt;{
    name: string;
    canFly: boolean;
}&gt; | undefined): (input: {
    name: string;
    canFly: boolean;
}) =&gt; {
    name: string;
    canFly: boolean;
}
import fields">fields</data-lsp></span><span style="color:#D6DBDB">&lt;{<data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">string</span><span style="color:#D6DBDB">, <data-lsp lsp="(property) canFly: boolean">canFly</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">boolean</span><span style="color:#D6DBDB">}&gt;(),</span></div><div class="line dim"><span style="color:#D6DBDB">});</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line dim"><span style="color:#A8A8B1">import</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span><span style="color:#F56565"><data-lsp lsp="(alias) const variant: {
    &lt;VM extends RawVariant&gt;(template: GenericTemplate&lt;VM&gt;): Identity&lt;GenericVariantRecord&lt;VM, &quot;type&quot;&gt;&gt;;
    &lt;VM_1 extends RawVariant&gt;(template: VM_1): Identity&lt;...&gt;;
    &lt;T extends string | VariantCreator&lt;...&gt;&gt;(template: T[]): Identity&lt;...&gt;;
}
import variant">variant</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) function fields&lt;T extends {}&gt;(defaults?: Partial&lt;T&gt;): (...args: {} extends T ? ([input: T] | []) : [input: T]) =&gt; T
import fields">fields</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="**Create a variant type**.

(alias) type VariantOf&lt;T extends VariantModule&lt;string&gt;, TType = undefined&gt; = TType extends undefined ? Identity&lt;VariantTypeSpread&lt;T&gt;[keyof T]&gt; : TType extends TypesOf&lt;T&gt; ? Extract&lt;Identity&lt;...&gt;, Record&lt;...&gt;&gt; : Identity&lt;...&gt;
import VariantOf">VariantOf</data-lsp></span><span style="color:#A8A8B1">}</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">from</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">variant</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">;</span></div><div class="line dim"> </div><div class="line dim"><span style="color:#A8A8B1">export</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="const Animal: {
    cat: VariantCreator&lt;&quot;cat&quot;, (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    }, &quot;type&quot;&gt;;
    dog: VariantCreator&lt;&quot;dog&quot;, (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    }, &quot;type&quot;&gt;;
    snake: VariantCreator&lt;...&gt;;
    bird: VariantCreator&lt;...&gt;;
}">Animal</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> <data-lsp lsp="(alias) variant&lt;{
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
    bird: (input: {
        ...;
    }) =&gt; {
        ...;
    };
}&gt;(template: {
    cat: (input: {
        name: string;
        furnitureDamaged: number;
    }) =&gt; {
        name: string;
        furnitureDamaged: number;
    };
    dog: (input: {
        name: string;
        favoriteBall?: string | undefined;
    }) =&gt; {
        name: string;
        favoriteBall?: string | undefined;
    };
    snake: (name: string, pattern?: string) =&gt; {
        ...;
    };
    bird: (input: {
        ...;
    }) =&gt; {
        ...;
    };
}): {
    ...;
} (+2 overloads)
import variant">variant</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span></div><div class="line dim"><span style="color:#FFFFFF">    <data-lsp lsp="(property) cat: (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}">cat</data-lsp>: <data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    furnitureDamaged: number;
}&gt;(defaults?: Partial&lt;{
    name: string;
    furnitureDamaged: number;
}&gt; | undefined): (input: {
    name: string;
    furnitureDamaged: number;
}) =&gt; {
    name: string;
    furnitureDamaged: number;
}
import fields">fields</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">number</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">&gt;()</span><span style="color:#FFFFFF">,</span></div><div class="line dim"><span style="color:#FFFFFF">    <data-lsp lsp="(property) dog: (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}">dog</data-lsp>: <data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt;(defaults?: Partial&lt;{
    name: string;
    favoriteBall?: string | undefined;
}&gt; | undefined): (input: {
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; {
    name: string;
    favoriteBall?: string | undefined;
}
import fields">fields</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) favoriteBall?: string | undefined">favoriteBall</data-lsp></span><span style="color:#A8A8B1">?:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">&gt;()</span><span style="color:#FFFFFF">,</span></div><div class="line dim"><span style="color:#FFFFFF">    <data-lsp lsp="(property) snake: (name: string, pattern?: string) =&gt; {
    name: string;
    pattern: string;
}">snake</data-lsp>: </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(parameter) pattern: string">pattern</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">striped</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) pattern: string">pattern</data-lsp></span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">,</span></div><div class="line highlight"><span style="color:#FFFFFF">    <data-lsp lsp="(property) bird: (input: {
    name: string;
    canFly: boolean;
}) =&gt; {
    name: string;
    canFly: boolean;
}">bird</data-lsp>: <data-lsp lsp="Describe the fields of the variation.

When used creates a function of type `(input: T) =&gt; T &amp; {type: &#x27;literal&#x27;}`

(alias) fields&lt;{
    name: string;
    canFly: boolean;
}&gt;(defaults?: Partial&lt;{
    name: string;
    canFly: boolean;
}&gt; | undefined): (input: {
    name: string;
    canFly: boolean;
}) =&gt; {
    name: string;
    canFly: boolean;
}
import fields">fields</data-lsp></span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF">{</span><span style="color:#F56565"><data-lsp lsp="(property) name: string">name</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">string</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(property) canFly: boolean">canFly</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">boolean</span><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">&gt;()</span><span style="color:#FFFFFF">,</span></div><div class="line dim"><span style="color:#FFFFFF">}</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>With the bird type in place, autocomplete can help guide us implement our handlers. In VS Code, type <code>&lt;ctrl&gt;</code>+<code>&lt;space&gt;</code> to show the remaining cases.</p><p><img loading="lazy" alt="match autocomplete showing &amp;#39;bird&amp;#39; and &amp;#39;default&amp;#39;" src="/variant/assets/images/match_autocomplete-1a8c0e1a8bcc5adb9113489a26c3843f.png" width="1161" height="388" class="img_ev3q"></p><p>With the new handler in place, the compiler is happy.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line dim"><span style="color:#C24E4B">function</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">Animal</data-lsp>) {</span></div><div class="line dim"><span style="color:#D6DBDB">    </span><span style="color:#9BB7A7">return</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, {
    ...;
}, string&gt;(target: string | ... 3 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, handler: {
    ...;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; {
    ...;
})): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">animal</data-lsp></span><span style="color:#D6DBDB">, {</span></div><div class="line dim"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) dog: (_: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean">dog</data-lsp></span><span style="color:#D6DBDB">: </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">,</span></div><div class="line dim"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) cat: ({ furnitureDamaged }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; boolean">cat</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">&lt;</span><span style="color:#D6DBDB"> </span><span style="color:#4EADAD">3</span><span style="color:#D6DBDB">,</span></div><div class="line dim"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) snake: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean">snake</data-lsp></span><span style="color:#D6DBDB">: </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">true</span><span style="color:#D6DBDB">,</span></div><div class="line highlight"><span style="color:#D6DBDB">        </span><span style="color:#F9F7F1"><data-lsp lsp="(property) bird: ({ canFly }: {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; boolean">bird</data-lsp></span><span style="color:#D6DBDB">: ({</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) canFly: boolean">canFly</data-lsp></span><span style="color:#D6DBDB">}) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) canFly: boolean">canFly</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#506565">// rival only wants flying birds</span></div><div class="line dim"><span style="color:#D6DBDB">    })</span></div><div class="line dim"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line dim"><span style="color:#A8A8B1">function</span><span style="color:#FFFFFF"> <data-lsp lsp="function rivalWantsAnimal(animal: Animal): boolean">rivalWantsAnimal</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line dim"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">return</span><span style="color:#FFFFFF"> <data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, {
    ...;
}, string&gt;(target: string | ... 3 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, handler: {
    ...;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; {
    ...;
})): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">animal</data-lsp></span><span style="color:#FFFFFF">, {</span></div><div class="line dim"><span style="color:#FFFFFF">        <data-lsp lsp="(property) dog: (_: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean">dog</data-lsp>: </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">false</span><span style="color:#FFFFFF">,</span></div><div class="line dim"><span style="color:#FFFFFF">        <data-lsp lsp="(property) cat: ({ furnitureDamaged }: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
}) =&gt; boolean">cat</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(parameter) furnitureDamaged: number">furnitureDamaged</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">&lt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">3</span><span style="color:#FFFFFF">,</span></div><div class="line dim"><span style="color:#FFFFFF">        <data-lsp lsp="(property) snake: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean">snake</data-lsp>: </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">true</span><span style="color:#FFFFFF">,</span></div><div class="line highlight"><span style="color:#FFFFFF">        <data-lsp lsp="(property) bird: ({ canFly }: {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; boolean">bird</data-lsp>: </span><span style="color:#A8A8B1">({</span><span style="color:#F56565"><data-lsp lsp="(parameter) canFly: boolean">canFly</data-lsp></span><span style="color:#A8A8B1">})</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#F56565"><data-lsp lsp="(parameter) canFly: boolean">canFly</data-lsp></span><span style="color:#FFFFFF">, </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> rival only wants flying birds</span></div><div class="line dim"><span style="color:#FFFFFF">    }</span><span style="color:#A8A8B1">)</span></div><div class="line dim"><span style="color:#A8A8B1">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>However, there will be times when we don&#x27;t want to handle each case individually, or may only be concerned with a subset of the cases. For those situations, we have <strong>partial matching</strong>. We activate it with the <code>partial</code> helper function. Let&#x27;s create a function to decide on animals for a person who is obsessed with snakes.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const slytherinFanWantsAnimal: (hopefullyASnake: Animal) =&gt; boolean">slytherinFanWantsAnimal</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) hopefullyASnake: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">hopefullyASnake</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#F9F7F1"><data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, HandlerFromPartial&lt;{
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
}, &quot;cat&quot; | ... 2 more ... | &quot;bird&quot;&gt;, string&gt;(target: string | ... 3 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, handler: HandlerFromPartial&lt;...&gt; | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; HandlerFromPartial&lt;...&gt;)): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) hopefullyASnake: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">hopefullyASnake</data-lsp></span><span style="color:#D6DBDB">, </span><span style="color:#F9F7F1"><data-lsp lsp="Handle some cases, use **`default:`** to handle the remainder (Active).

(alias) partial&lt;{
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
}, {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}&gt;(handler: {
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; {
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
})): (input: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; HandlerFromPartial&lt;...&gt; (+1 overload)
import partial">partial</data-lsp></span><span style="color:#D6DBDB">({</span></div><div class="line"><span style="color:#D6DBDB">        <data-lsp lsp="(property) snake: () =&gt; boolean">snake</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Create a function that returns a value after being called.

(alias) constant&lt;boolean&gt;(x: boolean): () =&gt; boolean
import constant">constant</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#9BB7A7">true</span><span style="color:#D6DBDB">), </span><span style="color:#506565">// same as () =&gt; true, but nicer to fingers.</span></div><div class="line"><span style="color:#D6DBDB">        <data-lsp lsp="(property) default: () =&gt; boolean">default</data-lsp>: </span><span style="color:#F9F7F1"><data-lsp lsp="Create a function that returns a value after being called.

(alias) just&lt;boolean&gt;(x: boolean): () =&gt; boolean
import just">just</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">), </span><span style="color:#506565">// same as &#x27;constant(false)&#x27;. Your choice.</span></div><div class="line"><span style="color:#D6DBDB">    }))</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const slytherinFanWantsAnimal: (hopefullyASnake: Animal) =&gt; boolean">slytherinFanWantsAnimal</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) hopefullyASnake: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">hopefullyASnake</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span></div><div class="line"><span style="color:#FFFFFF">    <data-lsp lsp="Match an instance of a variant or literal union against its possible cases.

(alias) match&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, HandlerFromPartial&lt;{
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
}, &quot;cat&quot; | ... 2 more ... | &quot;bird&quot;&gt;, string&gt;(target: string | ... 3 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}, handler: HandlerFromPartial&lt;...&gt; | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; HandlerFromPartial&lt;...&gt;)): boolean (+3 overloads)
import match">match</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) hopefullyASnake: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}">hopefullyASnake</data-lsp></span><span style="color:#FFFFFF">, <data-lsp lsp="Handle some cases, use **`default:`** to handle the remainder (Active).

(alias) partial&lt;{
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
}, {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}&gt;(handler: {
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
} | ((t: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; {
    snake: () =&gt; boolean;
    default: () =&gt; boolean;
})): (input: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | ... 2 more ... | {
    type: &quot;bird&quot;;
    name: string;
    canFly: boolean;
}) =&gt; HandlerFromPartial&lt;...&gt; (+1 overload)
import partial">partial</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) snake: () =&gt; boolean">snake</data-lsp>: <data-lsp lsp="Create a function that returns a value after being called.

(alias) constant&lt;boolean&gt;(x: boolean): () =&gt; boolean
import constant">constant</data-lsp></span><span style="color:#A8A8B1">(true)</span><span style="color:#FFFFFF">, </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> same as () =&gt; true, but nicer to fingers.</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) default: () =&gt; boolean">default</data-lsp>: <data-lsp lsp="Create a function that returns a value after being called.

(alias) just&lt;boolean&gt;(x: boolean): () =&gt; boolean
import just">just</data-lsp></span><span style="color:#A8A8B1">(false)</span><span style="color:#FFFFFF">, </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> same as &#x27;constant(false)&#x27;. Your choice.</span></div><div class="line"><span style="color:#FFFFFF">    }</span><span style="color:#A8A8B1">))</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>A faster way</div><div class="admonitionContent_S0QG"><p>In this special case where we are asking &quot;is this a snake&quot;, match is overkill. We can use <a href="/variant/docs/next/book/inspection#istype"><code>isType(hopefullyASnake, &#x27;snake&#x27;)</code></a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="harder-better-faster-matcher-">Harder Better Faster <code>matcher()</code> <a href="https://www.youtube.com/watch?v=gAjR4_CbPpQ" target="_blank" rel="noopener noreferrer">(🎸)</a><a href="#harder-better-faster-matcher-" class="hash-link" aria-label="Direct link to harder-better-faster-matcher-" title="Direct link to harder-better-faster-matcher-">​</a></h3><p>There&#x27;s an important scenario that is not possible with a regular match statement, but <em>is</em> possible with the traditional <code>switch</code>. By taking advantage of fallthrough cases, a switch statement can handle multiple cases at once, also known as <strong>multi-matching</strong>.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const hasFur: (animal: Animal) =&gt; boolean">hasFur</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> {</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#9BB7A7">switch</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF"><data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#D6DBDB">) {</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#9BB7A7">case</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;cat&#x27;</span><span style="color:#D6DBDB">:</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#9BB7A7">case</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">:</span></div><div class="line"><span style="color:#D6DBDB">            </span><span style="color:#9BB7A7">return</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">true</span><span style="color:#D6DBDB">;</span></div><div class="line"><span style="color:#D6DBDB">        </span><span style="color:#9BB7A7">case</span><span style="color:#D6DBDB"> </span><span style="color:#63A5A5">&#x27;snake&#x27;</span><span style="color:#D6DBDB">:</span></div><div class="line"><span style="color:#D6DBDB">            </span><span style="color:#9BB7A7">return</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">;</span></div><div class="line"><span style="color:#D6DBDB">    }</span></div><div class="line"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const hasFur: (animal: Animal) =&gt; boolean">hasFur</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="(alias) type Animal&lt;T extends TypeNames&lt;{ cat: VariantCreator&lt;&quot;cat&quot;, (input: { name: string; furnitureDamaged: number; }) =&gt; { name: string; furnitureDamaged: number; }, &quot;type&quot;&gt;; dog: VariantCreator&lt;&quot;dog&quot;, (input: { name: string; favoriteBall?: string | undefined; }) =&gt; { name: string; favoriteBall?: string | undefined; }, &quot;type&quot;&gt;; snake: VariantCreator&lt;...&gt;; }&gt; = undefined&gt; = T extends undefined ? {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
} : T extends TypesOf&lt;...&gt; ? Extract&lt;...&gt; | ... 1 more ... | Extract&lt;...&gt; : {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}
import Animal">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">switch</span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#FFFFFF">.<data-lsp lsp="(property) type: &quot;cat&quot; | &quot;dog&quot; | &quot;snake&quot;">type</data-lsp></span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">        </span><span style="color:#A8A8B1">case</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">cat</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">:</span></div><div class="line"><span style="color:#FFFFFF">        </span><span style="color:#A8A8B1">case</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">:</span></div><div class="line"><span style="color:#FFFFFF">            </span><span style="color:#A8A8B1">return</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">true</span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#FFFFFF">        </span><span style="color:#A8A8B1">case</span><span style="color:#FFFFFF"> </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">snake</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">:</span></div><div class="line"><span style="color:#FFFFFF">            </span><span style="color:#A8A8B1">return</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">false</span><span style="color:#FFFFFF">;</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#A8A8B1">}</span></div><div class="line"><span style="color:#A8A8B1">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>To access this feature with the benefits of variant&#x27;s pattern matching, use the <a href="/variant/docs/next/book/matcher"><code>matcher()</code></a> function.</p><p>This <a href="/variant/docs/next/glossary#builder-pattern">builder-pattern</a> alternative to match can construct the handler piece by piece. When all cases are handled, finish off with a <code>.complete()</code> statement (or other <a href="/variant/docs/next/book/matcher#terminal">terminal</a>) to execute the handler.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const hasFur: (animal: Animal) =&gt; boolean">hasFur</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.when&lt;&quot;cat&quot; | &quot;dog&quot;, (_: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean&gt;(variations: &quot;cat&quot; | &quot;dog&quot; | (&quot;cat&quot; | &quot;dog&quot;)[], handler: (_: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean): Matcher&lt;...&gt; (+1 overload)">when</data-lsp></span><span style="color:#D6DBDB">([</span><span style="color:#63A5A5">&#x27;cat&#x27;</span><span style="color:#D6DBDB">, </span><span style="color:#63A5A5">&#x27;dog&#x27;</span><span style="color:#D6DBDB">], </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">true</span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;cat&quot; | &quot;dog&quot;, (_: { type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; }) =&gt; boolean&gt;&gt;.when&lt;&quot;snake&quot;, (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean&gt;(variations: &quot;snake&quot; | &quot;snake&quot;[], handler: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean): Matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, &quot;type&quot;, Record&lt;...&gt; &amp; Record&lt;...&gt;&gt; (+1 overload)">when</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#63A5A5">&#x27;snake&#x27;</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-lsp lsp="(property) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;cat&quot; | &quot;dog&quot;, (_: { type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; }) =&gt; boolean&gt; &amp; Record&lt;...&gt;&gt;.complete: (options?: CompleteOptions | undefined) =&gt; boolean">complete</data-lsp></span><span style="color:#D6DBDB">();</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const hasFur: (animal: Animal) =&gt; boolean">hasFur</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> <data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.when&lt;&quot;cat&quot; | &quot;dog&quot;, (_: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean&gt;(variations: &quot;cat&quot; | &quot;dog&quot; | (&quot;cat&quot; | &quot;dog&quot;)[], handler: (_: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}) =&gt; boolean): Matcher&lt;...&gt; (+1 overload)">when</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">[</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">cat</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">, </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">dog</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">], </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">true)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;cat&quot; | &quot;dog&quot;, (_: { type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; }) =&gt; boolean&gt;&gt;.when&lt;&quot;snake&quot;, (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean&gt;(variations: &quot;snake&quot; | &quot;snake&quot;[], handler: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean): Matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, &quot;type&quot;, Record&lt;...&gt; &amp; Record&lt;...&gt;&gt; (+1 overload)">when</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">snake</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">false)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-lsp lsp="(property) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;cat&quot; | &quot;dog&quot;, (_: { type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; }) =&gt; boolean&gt; &amp; Record&lt;...&gt;&gt;.complete: (options?: CompleteOptions | undefined) =&gt; boolean">complete</data-lsp></span><span style="color:#A8A8B1">()</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-error-reporting">Improved error reporting.<a href="#improved-error-reporting" class="hash-link" aria-label="Direct link to Improved error reporting." title="Direct link to Improved error reporting.">​</a></h4><p>The <code>matcher()</code> function has better error reporting than <code>match()</code>. When cases are missing, it will raise an error explaining <em>exactly</em> which ones.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const hasFur: (animal: Animal) =&gt; any">hasFur</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.when&lt;&quot;snake&quot;, (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean&gt;(variations: &quot;snake&quot; | &quot;snake&quot;[], handler: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean): Matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, &quot;type&quot;, Record&lt;...&gt;&gt; (+1 overload)">when</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#63A5A5">&#x27;snake&#x27;</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">false</span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-err><data-lsp lsp="(property) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;snake&quot;, (_: { type: &quot;snake&quot;; name: string; pattern: string; }) =&gt; boolean&gt;&gt;.complete: VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;">complete</data-lsp></data-err></span><span style="color:#D6DBDB">();</span></div><span class="error"><span>This expression is not callable.
  Type &#x27;VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;&#x27; has no call signatures.</span><span class="code">2349</span></span><span class="error-behind">This expression is not callable.
  Type &#x27;VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;&#x27; has no call signatures.</span></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const hasFur: (animal: Animal) =&gt; any">hasFur</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> <data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-lsp lsp="Handle one or more cases with a set of types and a handler.

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.when&lt;&quot;snake&quot;, (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean&gt;(variations: &quot;snake&quot; | &quot;snake&quot;[], handler: (_: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}) =&gt; boolean): Matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, &quot;type&quot;, Record&lt;...&gt;&gt; (+1 overload)">when</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">snake</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">, </span><span style="color:#F56565"><data-lsp lsp="(parameter) _: {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">_</data-lsp></span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">false)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-err><data-lsp lsp="(property) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, Record&lt;&quot;snake&quot;, (_: { type: &quot;snake&quot;; name: string; pattern: string; }) =&gt; boolean&gt;&gt;.complete: VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;">complete</data-lsp></data-err></span><span style="color:#A8A8B1">()</span><span style="color:#FFFFFF">;</span></div><span class="error"><span>This expression is not callable.
  Type &#x27;VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;&#x27; has no call signatures.</span><span class="code">2349</span></span><span class="error-behind">This expression is not callable.
  Type &#x27;VariantError&lt;[&quot;The handler has not been fully completed. Expected key(s)&quot;, &quot;cat&quot; | &quot;dog&quot;]&gt;&#x27; has no call signatures.</span></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-tools">Built-in tools<a href="#built-in-tools" class="hash-link" aria-label="Direct link to Built-in tools" title="Direct link to Built-in tools">​</a></h4><p>There are many options to the <code>matcher()</code>. For instance, it can act as a <a href="/variant/docs/next/glossary#lookup-table">lookup table</a>, removing the need for <code>constant()</code>/<code>just()</code>.</p><pre class="shiki comrade-contrast twoslash lsp" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="const animalEmoji: (animal: Animal) =&gt; string">animalEmoji</data-lsp></span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> <data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1"><data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">    .</span><span style="color:#F9F7F1"><data-lsp lsp="Provide an exhaustive table of the unhandled options and look up which value
to use based on the instance.

This is a **terminal** and resolves the matcher.

```ts
const getSound = (a: Animal) =&gt; matcher(a)
    .lookup({
        cat: &#x27;purr&#x27;,
        dog: &#x27;woof&#x27;,
        snake: &#x27;hiss&#x27;,
    })
```

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.lookup&lt;{
    cat: string;
    dog: string;
    snake: string;
}&gt;(table: {
    cat: string;
    dog: string;
    snake: string;
}): string">lookup</data-lsp></span><span style="color:#D6DBDB">({</span></div><div class="line"><span style="color:#D6DBDB">        <data-lsp lsp="(property) cat: string">cat</data-lsp>: </span><span style="color:#63A5A5">&#x27;🐱&#x27;</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">        <data-lsp lsp="(property) dog: string">dog</data-lsp>: </span><span style="color:#63A5A5">&#x27;🐕&#x27;</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">        <data-lsp lsp="(property) snake: string">snake</data-lsp>: </span><span style="color:#63A5A5">&#x27;🐍&#x27;</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">    })</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme twoslash lsp" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> <data-lsp lsp="const animalEmoji: (animal: Animal) =&gt; string">animalEmoji</data-lsp> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1"><data-lsp lsp="type Animal = {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">Animal</data-lsp>)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> <data-lsp lsp="(alias) matcher&lt;{
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}, string&gt;(target: string | {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}): Matcher&lt;...&gt;
import matcher">matcher</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#F56565"><data-lsp lsp="(parameter) animal: {
    type: &quot;cat&quot;;
    name: string;
    furnitureDamaged: number;
} | {
    type: &quot;dog&quot;;
    name: string;
    favoriteBall?: string | undefined;
} | {
    type: &quot;snake&quot;;
    name: string;
    pattern: string;
}">animal</data-lsp></span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">    .<data-lsp lsp="Provide an exhaustive table of the unhandled options and look up which value
to use based on the instance.

This is a **terminal** and resolves the matcher.

```ts
const getSound = (a: Animal) =&gt; matcher(a)
    .lookup({
        cat: &#x27;purr&#x27;,
        dog: &#x27;woof&#x27;,
        snake: &#x27;hiss&#x27;,
    })
```

(method) Matcher&lt;{ type: &quot;cat&quot;; name: string; furnitureDamaged: number; } | { type: &quot;dog&quot;; name: string; favoriteBall?: string | undefined; } | { type: &quot;snake&quot;; name: string; pattern: string; }, &quot;type&quot;, {}&gt;.lookup&lt;{
    cat: string;
    dog: string;
    snake: string;
}&gt;(table: {
    cat: string;
    dog: string;
    snake: string;
}): string">lookup</data-lsp></span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) cat: string">cat</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">🐱</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) dog: string">dog</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">🐕</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">        <data-lsp lsp="(property) snake: string">snake</data-lsp>: </span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">🐍</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#FFFFFF">,</span></div><div class="line"><span style="color:#FFFFFF">    }</span><span style="color:#A8A8B1">)</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><h4 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-up">Scaling up<a href="#scaling-up" class="hash-link" aria-label="Direct link to Scaling up" title="Direct link to Scaling up">​</a></h4><p>As the number of cases in a variant grows into the dozens, hundreds, or even thousands, it will become necessary to refactor these elements and handle them one subset at a time. The matcher is the ideal solution to delegate this handling based on these groups.</p><p>Animals, when it comes to domain modeling, are a bit like the arithmetic of a coding tutorial. They demonstrate the structures,
but more often your real-life programs will be more complex. In redux applications, for example, it&#x27;s common to have a reducer, a function that takes a state and some descriptive action (<em>move to this tile, kill this enemy</em>) and returns a new state. As an application grows, it becomes necessary to separate reducer logic into smaller chunks. This is no problem. </p><pre class="shiki comrade-contrast" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#9BB7A7">export</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">rootReducer</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> (</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF">initState</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF">action</span><span style="color:#9BB7A7">:</span><span style="color:#D6DBDB"> Action) </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> {</span></div><div class="line"><span style="color:#D6DBDB">   </span><span style="color:#9BB7A7">return</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">matcher</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">action</span><span style="color:#D6DBDB">)</span></div><div class="line"><span style="color:#D6DBDB">      .</span><span style="color:#F9F7F1">when</span><span style="color:#D6DBDB">(</span><span style="color:#F9F7F1">types</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">DebugAction</span><span style="color:#D6DBDB">), </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">debugReducer</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB">))</span></div><div class="line"><span style="color:#D6DBDB">      .</span><span style="color:#F9F7F1">when</span><span style="color:#D6DBDB">(</span><span style="color:#F9F7F1">types</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">AppAction</span><span style="color:#D6DBDB">), </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">appReducer</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB">))</span></div><div class="line"><span style="color:#D6DBDB">      .</span><span style="color:#F9F7F1">when</span><span style="color:#D6DBDB">(</span><span style="color:#F9F7F1">types</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">GameAction</span><span style="color:#D6DBDB">), </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB"> </span><span style="color:#C24E4B">=&gt;</span><span style="color:#D6DBDB"> ({</span><span style="color:#9BB7A7">...</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB">, game: </span><span style="color:#F9F7F1">gameReducer</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF">_</span><span style="color:#D6DBDB">))})</span></div><div class="line"><span style="color:#D6DBDB">      .</span><span style="color:#F9F7F1">else</span><span style="color:#D6DBDB">(</span><span style="color:#F9F7F1">just</span><span style="color:#D6DBDB">(</span><span style="color:#FFFFFF">state</span><span style="color:#D6DBDB">)); </span><span style="color:#506565">// ignore redux init actions</span></div><div class="line"><span style="color:#D6DBDB">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">export</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> rootReducer </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#F56565">state</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> </span><span style="color:#F56565">initState</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">action</span><span style="color:#A8A8B1">:</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">Action)</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span></div><div class="line"><span style="color:#FFFFFF">   </span><span style="color:#A8A8B1">return</span><span style="color:#FFFFFF"> matcher</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">action</span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">      .when</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">types</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">DebugAction</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> debugReducer</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">state</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#A8A8B1">))</span></div><div class="line"><span style="color:#FFFFFF">      .when</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">types</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">AppAction</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> appReducer</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">state</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#A8A8B1">))</span></div><div class="line"><span style="color:#FFFFFF">      .when</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">types</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">GameAction</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=&gt;</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">{</span><span style="color:#A8A8B1">...</span><span style="color:#F56565">state</span><span style="color:#FFFFFF">, game: gameReducer</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">state</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">_</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">)}</span><span style="color:#A8A8B1">)</span></div><div class="line"><span style="color:#FFFFFF">      .else</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">just</span><span style="color:#A8A8B1">(</span><span style="color:#F56565">state</span><span style="color:#A8A8B1">))</span><span style="color:#FFFFFF">; </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> ignore redux init actions</span></div><div class="line"><span style="color:#FFFFFF">}</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>My game logic (<code>GameAction</code>/<code>gameReducer</code>) is separated from my state saving and loading logic (<code>AppAction</code>/<code>appReducer</code>), which are both further separated from my developer cheat codes (<code>DebugAction</code>/<code>debugReducer</code>). As the game grows in complexity, the <code>gameReducer</code> may itself delegate to more and more specific functions, all orchestrated through pattern matching.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="variant-applications">Variant Applications<a href="#variant-applications" class="hash-link" aria-label="Direct link to Variant Applications" title="Direct link to Variant Applications">​</a></h2><p><em>Variant is a language feature disguised as a library</em>. As such it&#x27;s relevant to any type of application, and at only <code>3kb</code> zipped it&#x27;s become very easy to include. I find myself using variant in every project I write, to the point that I import it in my personal template.</p><p>However there are certainly applications where variants <em>excel</em>.</p><ul><li><strong>Actions</strong>. Variant types are the ideal solution for expressing a set of possible actions that need dispatching. That&#x27;s exactly why this example is used in every conversation about discriminated unions. It will come up in this documentation as well, as soon as <a href="/variant/docs/next/tutorial/part-one">the next section</a>, in fact.</li><li><strong>Optionals and result objects</strong>. The <a href="https://en.wikipedia.org/wiki/Option_type" target="_blank" rel="noopener noreferrer"><code>Option&lt;T&gt;</code> type</a> is familiar and beloved for good reason as an alternative to null handling. Variants allow us to express this and even more powerful versions of result types with partial success and progress information.</li><li><strong>Compilers and interpreters.</strong> Variants closely mirror the recursive rule definitions of S-langs. Expressing grammars in TypeScript feels natural and is feasible with this project&#x27;s support for recursive and generic types.</li><li><strong>Heterogeneous</strong> (mixed) <strong>lists</strong>. These are the best way to express heterogeneous lists that can still be unzipped into separate, well-typed parts. Job or task systems tend to love having access to heterogeneous lists for the task queue, a list made up of different types of jobs.</li></ul><p>Variant is smoothly incorporated into existing codebases and should not be relegated to new projects. Recall that variant types simply <em>are</em> discriminated unions. There&#x27;s very little magic in the product, just in its construction. Users may start refactoring from any part of their application while retaining a working build.</p><p>You may wish to refactor your action creators yet continue processing them with the same old <code>switch</code> statement. Or take the opportunity to refresh your complex <code>switch</code> statements with the cleaner organization of <a href="/variant/docs/next/book/match"><code>match()</code></a>/<a href="/variant/docs/next/book/matcher"><code>matcher()</code></a> while leaving your current constructors in place. Some utilize the match functions but leave type creation entirely to codegen with GraphQL or protobuf.</p><p><em>Flexibility</em> has been coded into Variant 3.0 from the gound up. The variants we saw were created with <code>type</code> as the <a href="/variant/docs/next/glossary#discriminant">discriminant</a>, but this is simply the default. <em>Every</em> variant function can be keyed to a completely different common term, allowing the same level of functionality as <code>type</code> for unions that pivot on <code>kind</code>, <code>tag</code>, or GraphQL&#x27;s <code>__typename</code>.</p><pre class="shiki comrade-contrast" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> {</span><span style="color:#FFFFFF">variant</span><span style="color:#D6DBDB">, </span><span style="color:#FFFFFF">match</span><span style="color:#D6DBDB">} </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">variantCosmos</span><span style="color:#D6DBDB">(</span><span style="color:#63A5A5">&#x27;kind&#x27;</span><span style="color:#D6DBDB">); </span><span style="color:#506565">// is all it takes</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">{</span><span style="color:#F56565">variant</span><span style="color:#FFFFFF">, </span><span style="color:#F56565">match</span><span style="color:#A8A8B1">}</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> variantCosmos</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">kind</span><span style="color:#FFFFFF">&#x27;</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">; </span><span style="color:#A8A8B1">//</span><span style="color:#FFFFFF"> is all it takes</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>The software is open-source, actively maintained, and matures with each update. Every function in the library has its own test suite and documentation. This package has been trusted by individuals, corporations, and governments for mission-critical applications. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2><p>Thanks for sticking around to this point. The remainder of the documentation is broken down into the following sections to help intuitively understand the library. I recommend the tutorial. <a href="/variant/docs/next/tutorial/part-one">Click here</a>, or the <strong>Next</strong> button below.</p><ul><li><strong>The Tutorial</strong>: An exploration into building <strong>&quot;Kind of Super&quot;</strong>, a text-based browser game that leverages variant to simplify a lot of the complexity in becoming a superhero and protecting a city from superpowered threats. Built on standard web technologies and eventually incorporating React + Redux, &quot;Kind of Super&quot; demonstrates <em>exactly</em> how to integrate variant into a codebase with real-world tooling.</li><li><strong>The Book</strong>: A deep-dive into everything that&#x27;s possible with these tools, and some things that aren&#x27;t.</li><li><strong>Articles</strong>: Assorted content. Things that are useful to know but don&#x27;t fit well in a category.<ul><li>See <a href="/variant/docs/next/articles/type-name">replacing &#x27;type&#x27; with &#x27;kind&#x27; or &#x27;__typename&#x27;</a>.</li></ul></li><li><strong>Libraries</strong>: Comparisons to competitors, or How-To guides for compatible packages.</li><li><strong>API</strong>: A full API reference for the library. Every function, every type, every meaning.</li><li><strong>Glosssary</strong>: A consolidated dictionary of the esoteric terms I use.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/variant/docs/next/tutorial/part-zero"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introducing &quot;Kind of Super&quot;</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick start</a><ul><li><a href="#the-power-of-variant" class="table-of-contents__link toc-highlight">The power of <code>variant()</code></a></li><li><a href="#make-me-a-match-" class="table-of-contents__link toc-highlight">Make me a <code>match()</code> (🎻)</a></li><li><a href="#harder-better-faster-matcher-" class="table-of-contents__link toc-highlight">Harder Better Faster <code>matcher()</code> (🎸)</a></li></ul></li><li><a href="#variant-applications" class="table-of-contents__link toc-highlight">Variant Applications</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/variant/docs/intro">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/variant/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/variant/docs/api">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Related</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TypeScript<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://reasonml.github.io/docs/en/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item">ReasonML Variants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/paarthenon/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.npmjs.com/package/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item">NPM package<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Variant Contributors</div></div></div></footer></div>
<script src="/variant/assets/js/runtime~main.9f57bcc0.js"></script>
<script src="/variant/assets/js/main.fb419d95.js"></script>
</body>
</html>